# FOCUS & FLOW - Premium ToDo App

美しいデザインと直感的な操作性を兼ね備えた、あなただけのタスク管理アプリケーションです。
**v1.5.3: シンプルで軽快なタスク管理**

## 特徴 (Features)


*   **プレミアムデザイン**: グラスモーフィズム（すりガラス効果）と美しいグラデーションを採用したモダンなUI。
*   **タスク管理**:
    *   タスクの追加、編集、削除。
    *   サブタスク（サブゴール）の作成。
    *   優先度（Low, Medium, High）の設定。
    *   期限日（Due Date）の設定（カレンダーアイコンから選択）。
    *   繰り返しタスク（Daily Habit）の設定。
    *   **ピン留め**: 重要なタスクを常に最上部に固定。
*   **直感的な操作**:
    *   ドラッグ＆ドロップでのタスク並べ替え。
    *   完了/未完了のワンクリック切り替え。
*   **データの管理**:
    *   **データ保存**: すべてのデータはブラウザのローカルストレージに保存されます。
    *   **バックアップ**: エクスポート/インポート機能でデータのバックアップや移行が可能です。
    *   **ファイル読み込み/保存**: 
        *   **PC (Chrome/Edge)**: ファイルシステム連携により、一度開いたファイルへ自動保存が可能です。
        *   **Mobile**: 「保存」でダウンロード、「開く」で読み込み（上書き）となるシンプルな独立動作です。
*   **PWA対応**: アプリとしてインストール可能（Windows/Mac/iOS/Android）。
*   **ダークモード**: 目に優しいダークテーマへの切り替えに対応。

## 使い方 (Usage)

### ファイル操作（PC/Mobileハイブリッド）
環境に応じて動作が自動的に最適化されます。

#### A. PC (Desktop Chrome/Edge) - 自動保存モード
1.  **名前を付けて保存**: フロッピーアイコンをクリックし、PC内の保存場所を指定します（例: `my-tasks.json`）。以降、変更は**自動的にこのファイルに同期**されます。
2.  **ファイルを開く**: フォルダアイコンからファイルを選択すると、そのファイルを編集状態にします。

#### B. Mobile / その他 - 独立モード
1.  **保存 (Export)**: フロッピーアイコンをクリックすると、現在の状態が `focus-flow-YYYY-MM-DD.json` としてダウンロード保存されます（自動同期はされません）。
2.  **読み込み (Import)**: フォルダアイコンからJSONを選択し、データを読み込みます（現在データは上書きされます）。

### 通常の使い方
1.  **タスクの追加**:
    *   テキストボックスにタスクを入力します。
    *   必要に応じて優先度や繰り返し設定を行います。
    *   下部中央の大きな「＋」ボタン、またはEnterキーで追加します。
    *   入力欄横のカレンダーアイコンから日付を設定できます。
2.  **タスクのピン留め**:
    *   各タスクの右側にあるピンアイコンをクリックすると、リストの最上部に固定されます。
    *   もう一度クリックすると解除され、元の位置に戻ります。
3.  **タスクの編集**:
    *   タスクをクリックすると詳細編集画面が開きます。
    *   ここでサブタスクを追加することもできます。
3.  **並べ替え**:
    *   タスクをドラッグして好きな順序に入れ替えることができます（**注: 並べ替え順序は現在デバイスごとに一時的に保持されます**）。
    *   右上のソートボタンで日付順・優先度順に並べ替えることも可能です。



### 1. アプリの起動（インストール用）
1.  **`index.html`** を直接開いて利用できます。
2.  **デスクトップアプリとしてインストールしたい場合**:
    *   **`server.bat`** をダブルクリックして開いてください。
    *   ブラウザが開きます (**ポート: 3333**)。アドレスバー右側の「インストール」アイコンをクリックします。
    *   （インストール後は `server.bat` なしで起動できます）

※ iTunes等の他アプリとプロセスが混線しないよう、ポート3333を使用しています。

## 技術スタック (Tech Stack)

*   HTML5
*   CSS3 (Variables, Flexbox, Grid, Glassmorphism effects)
*   Vanilla JavaScript (ES6+ Modules)
*   **No Frameworks**: 軽量・高速
*   PWA (Manifest, Service Worker)
*   Google Fonts (Outfit)
*   Phosphor Icons

## インストール (PWA)

### デスクトップ (Chrome / Edge)
ブラウザのアドレスバーにあるインストールアイコンをクリックするか、メニューから「アプリをインストール」を選択します。

### iPhone (iOS / Safari)
1.  Safariでページを開きます。
2.  下部の「共有」ボタン（四角から矢印上）をタップ。
3.  「ホーム画面に追加」を選択。

### Android (Chrome)
1.  Chromeでページを開きます。
2.  右上のメニュー（︙）をタップ。
3.  「アプリをインストール」または「ホーム画面に追加」を選択。

## 更新履歴 (Update History)

### v1.5.7 - 2025/12/18
*   **オートバックアップ復活 (PCのみ)**: PC版（Chrome/Edge）でのみ、ファイルシステム連携による「自動保存機能」を復活させました。モバイル版は引き続き、シンプルなダウンロード形式で軽く動作します。

### v1.5.6 - 2025/12/18
*   **PWAプロセス分離**: アプリの配信ポートを `3333` に変更し、起動URLを固有化することで、他のアプリ（iTunes等）と一緒に終了してしまう問題を解決しました。
*   **API簡略化**: ファイルシステムアクセスAPI（自動保存）を削除し、モバイル版と同じくシンプルな「ダウンロード保存」「読み込み」形式に統一しました。軽快で安定した動作になります。

### v1.5.3 - 2025/12/18
*   **モバイルファイル対応**: モバイル環境でもファイルのインポート（開く）とエクスポート（保存）ができるように、代替（フォールバック）機能を実装しました。
*   **UIレイアウト改善**: タスク編集画面の「変更を保存」ボタンを、入力欄の直下に移動し、アクセスしやすくしました。また、スマホや縦長画面での表示崩れを修正しました。

### v1.5.2 - 2025/12/18
*   **PWA表示修正**: インストール時やオフライン起動時にスタイルが適用されない（表示崩れ）問題を修正しました（HTML/SWキャッシュバージョンの同期）。

### v1.5.1 - 2025/12/16
*   **デフォルト表示変更**: アプリ起動時のタスク表示フィルターを「Active（未完了）」に変更しました。
*   **完了日時記録**: タスク完了時に完了日時を記録し、元の期限日と併記（例: `期限日 → 完了日完了済み`）するようにしました。

### v1.5.0 - 2025/12/16
*   **モバイル対応強化**: タッチ操作でのタスク並べ替え（DnD）を改善
*   **UI改善**: タスク編集画面（モーダル）をアイコンボタン形式に刷新
*   **機能改善**: カレンダーボタンのタップ反応領域を拡大
*   **機能追加**: 期限切れタスクの表示機能を追加

### v1.4.3 - 2025/12/16
*   **モバイルレイアウト修正**: iPhone等でのヘッダータイトルとアイコンの重なりを修正（Flexbox対応）。
*   **デザイン調整**: 入力エリアのアイコン配置を最適化。
*   **キャッシュ更新**: PWAのスタイル更新が反映されない問題を修正。

### v1.4.0 - 2025/12/15
*   **ファイル直接編集機能**: File System Access APIを利用し、ローカルファイルへの自動保存に対応しました。

### v1.3.4 - 2025/12/15
*   **ローカルモードへの回帰**: 安定性とプライバシー重視のため、クラウド同期機能を削除し、完全なローカルストレージ運用に戻しました。
*   **インポート機能の改善**: PC移行用にJSONインポート機能を強化。

### v1.3.0 - 2025/12/15
*   **同期機能実装**: Firebase Firestoreによるリアルタイム同期を追加。
*   **データ移行**: ローカルデータをクラウドへ自動移行する機能を追加。
*   **アーキテクチャ更新**: `app.js` をES Module化し、Firebase SDKを統合。

### v1.2.4 - 2025/12/15
*   **UI一貫性の向上**:
    *   **アイコン統一**: 入力欄の優先度・リピート・カレンダーボタンを、右上のソートボタンと同じ「角丸スクエア」スタイルに統一。
    *   **優先度アイコン**: タスクリスト上の優先度表示を文字から旗アイコンに変更。
    *   **ソートアイコン**: 優先度ソートのアイコンを「！」から「旗」に変更。

### v1.2.3 - 2025/12/15
*   **優先度設定の改善**: 入力欄のスペース確保のため、ドロップダウンをサイクル式の「旗アイコン」に変更しました（Medium[橙] → High[赤] → Low[緑]）。
*   **UI調整**: 全体的な入力フォームのバランスを調整。

### v1.2.2 - 2025/12/15
*   **カレンダー位置修正**: カレンダーポップアップが画面内に収まるように表示位置を調整。
*   **ドキュメント更新**: 最新の更新内容を反映。

### v1.2.0 - 2025/12/15
*   **タスクのピン留め機能**: 重要なタスクを最上部に固定できるようになりました。
*   **アイコン修正**: ピン留め時のアイコン表示不具合を修正。
*   **PWA更新**: アプリ更新フローの最適化（即時反映）。
*   **UI改善**: ピンアイコンの常時表示（薄く表示）。

### v1.1.0 - 2025/12/15
*   **デザインリファイン**:
    *   タスクリストのコンパクト化。
    *   日付入力のアイコン化。
    *   追加ボタン（FAB）のデザイン刷新と配置変更。
    *   インポート/エクスポートアイコンの修正。

### v1.0.0 - 2025/12/14
*   **初期リリース**:
    *   基本タスク管理機能。
    *   グラスモーフィズムデザイン。
    *   ダークモード対応。
    *   PWA対応。
